# Quick Test Configuration
# This configuration is optimized for quick testing and debugging
# Uses smaller models and fewer steps for fast iteration

# Global settings
global:
  device: "auto"

# Tokenizer configuration - small vocabulary for quick training
tokenizer:
  input_files: ["dataset/wikitext-103-raw-v1/wikitext-103-raw/wiki.train.raw","dataset/wikitext-103-raw-v1/wikitext-103-raw/wiki.test.raw","dataset/wikitext-103-raw-v1/wikitext-103-raw/wiki.valid.raw"]
  output_dir: "small_tokenizer_output"
  vocab_size: 5000  # Smaller vocabulary for faster training

# Training configuration - minimal model for quick testing
train:
  tokenizer_path: "small_tokenizer_output"
  data_files: ["dataset/wikitext-103-raw-v1/wikitext-103-raw/wiki.train.raw"]
  total_steps: 100  # Very few steps for quick testing
  batch_size: 4    # Small batch size
  learning_rate: 0.001
  output_dir: "small_model_output"
  max_seq_len: 64  # Training sequence length
  dynamic_padding: true  # Enable dynamic padding for efficiency
  pad_to_multiple: 8    # Pad to multiples of 8 for GPU efficiency
  d_model: 64      # Small model
  n_layers: 1      # Single layer
  n_heads: 2       # Few attention heads
  d_ff: 256        # Small feed-forward
  dropout: 0.1
  checkpoint_interval: 25  # Save checkpoints frequently
  eval_interval: 25
  max_training_hours: null  # No time limit for quick tests
  auto_resume: true         # Enable auto-resume

# Evaluation configuration
eval:
  model_path: "small_model_output"
  tokenizer_path: "small_tokenizer_output"
  data_files: ["dataset/wikitext-103-raw-v1/wikitext-103-raw/wiki.valid.raw"]
  batch_size: 4
  max_samples: 100  # Limit samples for quick evaluation

# Generation configuration
generate:
  model_path: "small_model_output"
  tokenizer_path: "small_tokenizer_output"
  prompt: "The quick brown fox"
  max_new_tokens: 20  # Short generation
  temperature: 0.8
  do_sample: true
  top_k: 30
  top_p: 0.9
  repetition_penalty: 1.2  # Slight penalty to reduce repetition
  num_samples: 1
  show_prompt: true